%%
%% This is file `fithesis-base.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% base.dtx  (with options: `base')
%% 
%% Copyright 1998--2015  Daniel Marek (DM), Jan Pavlovič (JP),
%%                       Vít Novotný (VN), Petr Sojka (PS)
%% http://www.fi.muni.cz/tech/unix/tex/fithesis.xhtml
%% Faculty of Informatics, Masaryk University (Brno, Czech Republic)
%% 
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version
%% 1.3 of this license or (at your option) any later version.
%% The latest version of this license is available at
%% 
%%   http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is Vít Novotný (VN).
%% Send bug reports, requests for additions and questions
%% either to the fithesis discussion forum at
%% 
%%   http://is.muni.cz/auth/df/fithesis-sazba/
%% 
%% or to the e-mail address <witiko@mail.muni.cz>.
%% 
%% 
%% IMPORTANT COPYRIGHT NOTICE:
%% 
%% You are NOT ALLOWED to distribute this file alone.
%% 
%% If you receive only some of these files from someone, complain!
%% 
%% However, NO PERMISSION is granted to generate or to distribute a
%% modified version of this file under its original name.
%% 
%% You are NOT ALLOWED to change this file.
%% 
%% 
%% MODIFICATION ADVICE:
%% 
%% If you want to customize this file, it is best to make a copy of
%% the source file(s) from which it was produced.  Use a different
%% name for your copy(ies) and modify the copy(ies); this will ensure
%% that your modifications do not get overwritten when you install a
%% new release of the standard system.  You should also ensure that
%% your modified source file does not generate any modified file with
%% the same name as a standard file.
%% 
%% You will also need to produce your own, suitably named, .ins file to
%% control the generation of files from your source file; this file
%% should contain your own preambles for the files it generates, not
%% those in the standard .ins files.
%% 
%% The names of the source files used are shown above.
%% 
\ProvidesPackage{fithesis/style/mu/fithesis-base}[2015/06/23]
\NeedsTeXFormat{LaTeX2e}
\DeclareOption{10pt}{\def\thesis@ptsize{0}}
\DeclareOption{11pt}{\def\thesis@ptsize{1}}
\DeclareOption{12pt}{\def\thesis@ptsize{2}}
\newif\ifthesis@twoside@
\DeclareOption{oneside}{%
  \thesis@twoside@false\@twosidefalse\@mparswitchfalse}
\DeclareOption{twoside}{%
  \thesis@twoside@true \@twosidetrue \@mparswitchtrue}
\DeclareOption{onecolumn}{\@twocolumnfalse}
\DeclareOption{twocolumn}{\@twocolumntrue}
\DeclareOption{draft}{\setlength\overfullrule{5pt}}
\DeclareOption{final}{\setlength\overfullrule{0pt}}
\newif\ifthesis@color@
\DeclareOption{monochrome}{\thesis@color@false}
\DeclareOption{color}{\thesis@color@true}
\newif\ifthesis@palatino@
\DeclareOption{palatino}{\thesis@palatino@true}
\DeclareOption{nopalatino}{\thesis@palatino@false}
\newif\ifthesis@newtable@
\DeclareOption{table}{\thesis@newtable@true}
\DeclareOption{oldtable}{\thesis@newtable@false}
\DeclareOption{nolot}{\def\thesis@blocks@lot{}}
\DeclareOption{lot}{\let\thesis@blocks@lot\listoftables}
\DeclareOption{nolof}{\def\thesis@blocks@lof{}}
\DeclareOption{lof}{\let\thesis@blocks@lof\listoffigures}
\newif\ifthesis@cover@
\DeclareOption{nocover}{\thesis@cover@false}
\DeclareOption{cover}{\thesis@cover@true}
\ExecuteOptions{12pt,twoside,final,monochrome,palatino,
  oldtable,lot,lof,nocover}
\ProcessOptions
\thesis@require{xcolor}
\thesis@require{graphicx}
\thesis@require{pdfpages}
\thesis@require{keyval}
\thesis@require{ifxetex}
\thesis@require{ifluatex}
{\let\x\expandafter
\x\global\x\let\x\ifthesis@xeluatex\csname if%
  \ifxetex true\else
    \ifluatex\x\x\x t\x\x\x r\x\x\x u\x\x\x e%
    \else   f\x\x\x a\x\x\x l\x\x\x s\x\x\x e%
    \fi
  \fi\endcsname}
\ifthesis@xeluatex
  \ifthesis@palatino@
    \thesis@require{fontspec}
    \thesis@require{unicode-math}
    \setmainfont[Ligatures=TeX]{TeX Gyre Pagella}
    \setmathfont[math-style=ISO,bold-style=ISO,vargreek-shape=TeX]%
      {TG Pagella Math}
  \fi
\else
  \ifthesis@palatino@
    \RequirePackage[resetfonts]{cmap}
    \thesis@require{lmodern}
    \thesis@require{mathpazo}
    \thesis@require{tgpagella}
    \RequirePackage[T1]{fontenc}
  \fi
\fi
\let\thesis@newtable@old\tabular
\let\endthesis@newtable@old\endtabular
\ifthesis@newtable@\ifthesis@color@
  \thesis@require{tabularx}
  \thesis@require{booktabs}
  % The redefinition of `tabular`
  \renewenvironment{tabular}%
    {\rowcolors{1}{thesis@color@tableOdd}%
                  {thesis@color@tableEven}%
     \thesis@newtable@old}%
    {\endthesis@newtable@old}
  % The redefinition of `tabularx`
  \let\thesis@newtable@oldx\tabularx
  \let\endthesis@newtable@oldx\endtabularx
  \renewenvironment{tabularx}%
    {\rowcolors{1}{thesis@color@tableOdd}%
                  {thesis@color@tableEven}%
     \thesis@newtable@oldx}%
    {\endthesis@newtable@oldx}
  % Adjust the measurements
  \setlength{\aboverulesep}{0pt}
  \setlength{\belowrulesep}{0pt}
  \setlength{\extrarowheight}{.75ex}
\fi\fi
\thesis@require{hyperref}
\hypersetup{
  pdfborderstyle={/S/U/W 1}, % Less obtrusive borders
  plainpages=false,          % Multiple page numbering support
  pdfpagelabels              % Generate pdf page labels
}
\widowpenalty 10000
\clubpenalty  10000
\def\thesis@color@setup#1{%
  \setkeys{thesis@color}{#1}}
\define@key{thesis@color}{links}{%
  \definecolor{thesis@color@links}#1
  \hypersetup{linkbordercolor=thesis@color@links}}
\define@key{thesis@color}{tableOdd}{%
  \definecolor{thesis@color@tableOdd}#1}
\define@key{thesis@color}{tableEven}{%
  \definecolor{thesis@color@tableEven}#1}
\define@key{thesis@color}{tableEmph}{%
  \definecolor{thesis@color@tableEmph}#1}
\def\thesis@blocks@frontMatter{%
  \thesis@blocks@clear
  \pagestyle{plain}
  \parindent 1.5em
  \setcounter{page}{1}
  \pagenumbering{roman}}
\def\thesis@blocks@clear{%
  \ifthesis@twoside@%
    \clearpage%
    \thispagestyle{empty}%
    \cleardoublepage%
  \else%
    \newpage%
  \fi}
\def\thesis@blocks@clearRight{%
  \ifthesis@twoside@%
    \clearpage%
    \ifodd\value{page}%
      \thispagestyle{empty}%
      \hbox{}%
      \newpage%
    \fi%
  \else%
    \newpage%
  \fi}
\newcommand{\thesis@blocks@facultyLogo@monochrome}[1]%
  [width=40mm]{{%
    \edef\@path{\thesis@logopath\thesis@facultyLogo}%
    \includegraphics[#1]{\@path}}}
\newcommand{\thesis@blocks@facultyLogo@color}[1]%
  [width=40mm]{{%
    \edef\@path{\thesis@logopath\thesis@facultyLogo%
      \ifthesis@color@-color\fi}%
    \includegraphics[#1]{\@path}}}
\newcommand{\thesis@blocks@universityLogo@monochrome}[1]%
  [width=40mm]{{%
    \edef\@path{\thesis@logopath\thesis@universityLogo}%
    \includegraphics[#1]{\@path}}}
\newcommand{\thesis@blocks@universityLogo@color}[1]%
  [width=40mm]{{%
    \edef\@path{\thesis@logopath\thesis@universityLogo%
      \ifthesis@color@-color\fi}%
    \includegraphics[#1]{\@path}}}
\def\thesis@blocks@cover{%
  \ifthesis@cover@%
    \thesis@blocks@clear%
    \ifthesis@twoside@\@twosidefalse\fi % Temporarily disable twoside
    \begin{alwayssingle}%
      \thispagestyle{empty}%
      \begin{center}%
        \thesis@blocks@cover@header%
        \thesis@blocks@facultyLogo@monochrome\\[0.4in]%
        \let\footnotesize\small%
        \let\footnoterule\relax{}%
        \thesis@blocks@cover@content%
        \par\vfill%
        \thesis@blocks@cover@footer%
      \end{center}%
    \end{alwayssingle}%
    \ifthesis@twoside@\@twosidetrue\fi % Re-enable twoside
  \fi}
\newif\ifthesis@blocks@cover@university@
\thesis@blocks@cover@university@true
\newif\ifthesis@blocks@cover@faculty@
\thesis@blocks@cover@faculty@true
\newif\ifthesis@blocks@cover@department@
\thesis@blocks@cover@department@false
\newif\ifthesis@blocks@cover@field@
\thesis@blocks@cover@field@false

\def\thesis@blocks@cover@header{%
  {\sc\ifthesis@blocks@cover@university@%
        \thesis@titlePage@LARGE\thesis@@{universityName}\\%
   \fi\ifthesis@blocks@cover@faculty@%
        \thesis@titlePage@Large\thesis@@{facultyName}\\%
   \fi\ifthesis@blocks@cover@department@%
        \thesis@titlePage@large\thesis@department\\%
      \fi}
  \ifthesis@blocks@cover@field@%
    {\thesis@titlePage@large\vskip 1em%
      {\bf\thesis@@{fieldTitle}:} \thesis@field}%
  \fi\vskip 2em}
\def\thesis@blocks@cover@content{%
  {\thesis@titlePage@Huge\bf\thesis@TeXtitle\par\vfil}%
  \vskip 0.8in%
  {\thesis@titlePage@large\sc\thesis@@{typeName}}\\[0.3in]%
  {\thesis@titlePage@Large\bf\thesis@author}}
\def\thesis@blocks@cover@footer{%
  {\thesis@titlePage@large\thesis@place, \thesis@@{semester}}}
\def\thesis@blocks@titlePage{%
    \thesis@blocks@clear%
    \begin{alwayssingle}%
      \thispagestyle{empty}%
      \begin{center}%
        \thesis@blocks@titlePage@header%
        \thesis@blocks@facultyLogo@color\\[0.4in]%
        \let\footnotesize\small%
        \let\footnoterule\relax{}%
        \thesis@blocks@titlePage@content%
        \par\vfill%
        \thesis@blocks@titlePage@footer%
      \end{center}%
    \end{alwayssingle}}
\newif\ifthesis@blocks@titlePage@university@
\thesis@blocks@titlePage@university@true
\newif\ifthesis@blocks@titlePage@faculty@
\thesis@blocks@titlePage@faculty@true
\newif\ifthesis@blocks@titlePage@department@
\thesis@blocks@titlePage@department@false
\newif\ifthesis@blocks@titlePage@field@
\thesis@blocks@titlePage@field@false

\def\thesis@blocks@titlePage@header{%
  {\sc\ifthesis@blocks@titlePage@university@%
        \thesis@titlePage@LARGE\thesis@@{universityName}\\%
   \fi\ifthesis@blocks@titlePage@faculty@%
        \thesis@titlePage@Large\thesis@@{facultyName}\\%
   \fi\ifthesis@blocks@titlePage@department@%
        \thesis@titlePage@large\thesis@department\\%
      \fi}
  \ifthesis@blocks@titlePage@field@%
    {\thesis@titlePage@large\vskip 1em%
      {\bf\thesis@@{fieldTitle}:} \thesis@field}%
  \fi\vskip 2em}
\let\thesis@blocks@titlePage@content=\thesis@blocks@cover@content
\let\thesis@blocks@titlePage@footer=\thesis@blocks@cover@footer
\def\thesis@blocks@tables{%
  \thesis@blocks@clear%
  \tableofcontents%
  \thesis@blocks@lot%
  \thesis@blocks@lof}
\def\thesis@blocks@declaration{%
  \thesis@blocks@clear%
  \begin{alwayssingle}%
    \chapter*{\thesis@@{declarationTitle}}%
    \thesis@declaration%
    \vskip 2cm%
    \hfill\thesis@author%
  \end{alwayssingle}}
\def\thesis@blocks@thanks{%
  \ifx\thesis@thanks\undefined\else%
    \thesis@blocks@clear%
    \begin{alwayssingle}%
      \chapter*{\vspace*{\fill}\thesis@@{thanksTitle}}%
      \thesis@thanks%
    \end{alwayssingle}%
  \fi}
\def\thesis@blocks@abstract{%
  \begin{alwayssingle}%
    % Start the new chapter without clearing the right page
    {\def\cleardoublepage{}
    \chapter*{\thesis@@{abstractTitle}}}%
    \noindent\thesis@abstract%
    \par\vfil\null%
  \end{alwayssingle}}
\def\thesis@blocks@abstractEn{%
  \ifthesis@english\else%
    \begin{alwayssingle}%
      % Start the new chapter without clearing the right page
      {\def\cleardoublepage{}%
      \chapter*{\thesis@{english@abstractTitle}}%
      \thesis@abstractEn}%
      \par\vfil\null%
    \end{alwayssingle}%
  \fi}
\def\thesis@blocks@keywords{%
  \begin{alwayssingle}%
    % Start the new chapter without clearing the right page
    {\def\cleardoublepage{}%
    \chapter*{\thesis@@{keywordsTitle}}%
    \noindent\thesis@TeXkeywords}%
    \par\vfil\null%
  \end{alwayssingle}}
\def\thesis@blocks@keywordsEn{%
  \ifthesis@english\else%
    \begin{alwayssingle}%
      % Start the new chapter without clearing the right page
      {\def\cleardoublepage{}%
      \chapter*{\thesis@{english@keywordsTitle}}%
      \thesis@TeXkeywordsEn}%
      \par\vfil\null%
    \end{alwayssingle}%
  \fi}
\newif\ifthesis@blocks@assignment@
\thesis@blocks@assignment@true
\def\thesis@blocks@assignment{%
  \ifthesis@blocks@assignment@%
    \ifx\thesis@assignmentFiles\undefined%
      % Typeset a placeholder page.
      \thesis@blocks@clear%
      \begin{alwayssingle}%
        \thispagestyle{empty}%
        \addtocounter{page}{-\ifthesis@twoside@2\else1\fi}%
        \noindent\textit{\thesis@@{assignment}}%
      \end{alwayssingle}%
    \else%
      {\edef\@pdfList{\thesis@assignmentFiles}%
      \ifx\@pdfList\empty\else
        \let\ea\expandafter
        % Inject the specified PDF documents.
        \def\@inject##1,{\thesis@blocks@clear
          \def\@args{##1}\def\@relax{\relax}%
          \ifx\@args\@relax\else%
            % Trim leading spaces.
            \edef\@trimmed{\romannumeral-`\.##1}%
            \includepdf[pages=-]\@trimmed
            \ea\@inject\fi}%
        \ea\@inject\@pdfList,\relax,%
      \fi}%
    \fi%
  \fi}
\def\thesis@blocks@mainMatter{%
  \thesis@blocks@clear
  \setcounter{page}{1}
  \pagenumbering{arabic}
  \pagestyle{thesisheadings}
  \parindent 1.5em\relax}
\setcounter{tocdepth}{4}

\input\thesis@stylepath mu/fithesis-1\thesis@ptsize.clo\relax

\def\ps@thesisheadings{%
\def\chaptermark##1{%
\markright{%
\ifnum\c@secnumdepth >\m@ne
\thechapter.\ %
\fi ##1}}
\let\@oddfoot\@empty
\let\@oddhead\@empty
\def\@oddhead{\vbox{\hbox to \textwidth{%
\hfil{\sc\rightmark}}\vskip 4pt\hrule}}
\if@twoside
 \def\@evenhead{\vbox{\hbox to \textwidth{%
 {\sc\rightmark}\hfil}\vskip 4pt\hrule}}
\else
 \let\@evenhead\@oddhead
\fi
\def\@oddfoot{\hfil\PageFont\thepage}
\if@twoside
 \def\@evenfoot{\PageFont\thepage\hfil}%
\else
 \let\@evenfoot\@oddfoot
\fi
\let\@mkboth\markboth
}

\renewcommand*\chapter{%
\if@twoside
 \clearpage
 \thispagestyle{empty}
 \cleardoublepage
\else
 \clearpage
\fi
\thispagestyle{plain}%
\global\@topnum\z@
\@afterindentfalse
\secdef\@chapter\@schapter}

\renewcommand*\part{%
\clearpage
\thispagestyle{empty}
\cleardoublepage
\thispagestyle{empty}%
\if@twocolumn%
 \onecolumn
 \@tempswatrue
\else
 \@tempswafalse
\fi
\hbox{}\vfil
\secdef\@part\@spart}

\newif\if@restonecol
\def\alwayssingle{%
  \@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn\fi}
\def\endalwayssingle{\if@restonecol\twocolumn\fi}

\renewcommand*\l@part[2]{%
  \ifnum \c@tocdepth >-2\relax
    \addpenalty{-\@highpenalty}%
    \addvspace{0.5em \@plus\p@}%
    \begingroup
      \setlength\@tempdima{3em}%
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      {\leavevmode
       \normalfont \bfseries #1\hfil \hb@xt@\@pnumwidth{\hss #2}}\par
       \nobreak
         \global\@nobreaktrue
         \everypar{\global\@nobreakfalse\everypar{}}%
    \endgroup
    \addvspace{0.2em \@plus\p@}%
  \fi}

\renewcommand*\l@chapter[2]{%
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \vskip 1.0em \@plus\p@
    \setlength\@tempdima{1.5em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \bfseries
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak\hfil \nobreak\hb@xt@\@pnumwidth{\hss #2}\par
      \penalty\@highpenalty
    \endgroup
  \fi}

\renewcommand*\l@chapter{\@dottedtocline{1}{0em}{1.5em}}
\renewcommand*\l@section{\@dottedtocline{2}{1.5em}{2.3em}}
\renewcommand*\l@subsection{\@dottedtocline{3}{3.8em}{3.2em}}
\renewcommand*\l@subsubsection{\@dottedtocline{4}{7.0em}{3.8em}}
\endinput
%%
%% End of file `fithesis-base.sty'.
